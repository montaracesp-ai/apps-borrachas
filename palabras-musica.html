<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palabras Música</title>

    <!-- Archivo de estilos externo -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="card">
        <h1 id="palabra">Cargando...</h1>
    </div>

    <button id="btnCambiar">Cambiar palabra</button>

    <script>
        let palabras = [];
        let indice = -1;

        // Cargar el CSV del servidor
        async function cargarCSV() {
            try {
                const resp = await fetch("./CSV/palabras-musica.csv");
                const texto = await resp.text();

                palabras = texto
                    .split("\n")
                    .map(p => p.trim())
                    .filter(p => p.length > 0);

                mostrarPalabraInicial();
            } catch (err) {
                document.getElementById("palabra").textContent = "Error cargando CSV";
            }
        }

        function mostrarPalabraInicial() {
            indice = Math.floor(Math.random() * palabras.length);
            document.getElementById("palabra").textContent = palabras[indice];
        }

        function cambiarPalabra() {
            const card = document.querySelector(".card");
            card.classList.add("vibrando");

            // Cambiar palabra después de 2 segundos
            setTimeout(() => {
                card.classList.remove("vibrando");

                let nuevoIndice;
                do {
                    nuevoIndice = Math.floor(Math.random() * palabras.length);
                } while (nuevoIndice === indice);

                indice = nuevoIndice;

                document.getElementById("palabra").textContent = palabras[indice];
            }, 2000);
        }

        document.getElementById("btnCambiar").addEventListener("click", cambiarPalabra);

        // Iniciar carga del CSV
        cargarCSV();
    </script>

</body>
</html>
